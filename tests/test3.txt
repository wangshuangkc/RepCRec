// Test 3

begin(T1)
begin(T2)
dump()
R(T1,x1); R(T2,x2)		// T1 should read from site 2, T2 reads from site 1
R(T1,x3); R(T2,x4)		// T1 reads from site 4, T2 reads from site 1
fail(7)
dump()
fail(8)
dump()
fail(9)
dump()
W(T1,x1,1)				// Writes to site 2
fail(10)
dump()
recover(8)
dump()
W(T2,x2,2)				// Should succeed
recover(9)
dump()
begin(T3)
begin(T4)
W(T3,x3,3)				// Should abort because T1 has lock on x3 (unreplicated)
recover(7)
dump()
W(T4,x4,4)				// Should succeed 
recover(10)
dump()
