// Test 1

begin(T1)
begin(T2)
begin(T3)
dump()
R(T1,x1); R(T2,x2)	// T1 reads x1 from site 2, T2 reads x2 from site 1
W(T1,x1,1); W(T2,x2,2)	// both writes should succeed
fail(1)				// should cause T2 to fail to commit
R(T3,x3)			// Should read from site 4
R(T1,x8)			// Should read from site 2
W(T3,x3,3)			// Should succeed
R(T3,x4)			// Should read from site 2
end(T2)				// Should fail to commit
dump()
W(T3,x4,4)			// Should succeed
W(T1,x8,8)			// Should succeed
end(T1)				// Should abort T1 as cannot write x8
recover(1)			
dump()
R(T3,x2)			// Should read from site 2 (because site 1 isnt available for reading)
W(T3,x2,12)			// Should succeed
dump()
end(T3)				// Should succeed
dump()
